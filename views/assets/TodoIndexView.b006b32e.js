import{z as I,A as J,b as y,d as S,I as k,Z as K,_ as B,r as n,o as _,l as v,g as u,V as P,e as t,f as s,t as V,j as l,v as p,a as z,c as $,p as O,k as D,B as Z,S as G,u as Q,s as E,x as W,F as N,y as X,$ as Y,w as x}from"./index.f1396e21.js";import{A as oo,a as eo}from"./AppEmptyState.390c9aa1.js";const to=I(),A=to.getAuthToken,F=J("todoStore",{state:()=>({todoArray:null,noOfRows:10,pageIndex:1,isLoading:!1,isFetchingTodoArray:!1,errorFetchingTodo:!1,errorMessage:""}),getters:{getAllTodo:o=>o.todoArray},actions:{async fetchAllTodo(){this.isFetchingTodoArray=!0;try{const{data:o}=await y.get("/todo",{headers:{Authorization:`Bearer ${A}`}});this.todoArray=o.data.todo,this.noOfRows=o.data.noOfRows,this.pageIndex=o.DataTransfer.CurrentPage,this.isFetchingTodoArray=!1,console.log(JSON.stringify(o))}catch{this.isFetchingTodoArray=!1}},async createTodo(o){I(),this.isLoading=!0;try{const e=o.priority.split(" ").join("-")||o.priority,{data:i}=await y.post("/todo",{...o,priority:e},{headers:{Authorization:`Bearer ${A}`}});i.success&&(this.fetchAllTodo(),this.isLoading=!1,o.title="",o.description="")}catch{this.errorFetchingTodo=!0,this.isLoading=!1}this.isLoading=!1},async deleteTodo(o){try{const{data:e}=await y.delete(`/todo/${o}`,{headers:{Authorization:`Bearer ${A}`}});e.success&&this.fetchAllTodo(),console.log("the todo id is ",o),console.log(JSON.stringify(e))}catch{}}}});let w=!0;const so=S({name:"AppTodoItem",components:{Icon:k,AppListItem:K},data:()=>({}),props:{todo:{type:Object,required:!0,default:()=>({title:"Todo title",description:"Todo description"})}},computed:{isSelected(){return w},priority(){const o=this.todo.priority.toLowerCase().trim();return o==="urgent"?"todo__item--urgent":o==="delicate"?"todo__item--delicate":o==="not-urgent"?"todo__item--not__urgent":o==="delete"?"todo__item--delete":"todo__item--normal"}},mounted(){const o=document.getElementsByClassName("todo__item"),e=1300;for(const i of o)i.addEventListener("mousedown",function(h){setTimeout(c,e);function c(){w=!1,console.log("long press ",w),i.classList.add("is__selected")}}),i.addEventListener("mouseup",function(h){setTimeout(c,e);function c(){console.log("long press"),i.classList.add("is__selected")}})}});const no={class:"todo__item"},io={class:"todo__item__header__actions__delete"},ao={class:"todo__item__header trim__text"},ro={class:"todo__item__header__title"},lo={class:"todo__item__content"},co={class:"trim__text"};function po(o,e,i,h,c,b){const r=n("Icon"),m=n("AppListItem");return _(),v(m,{class:P(o.priority)},{default:u(()=>[t("div",no,[t("div",io,[s(r,{icon:"mdi:close-circle-outline",onClick:e[0]||(e[0]=f=>o.$emit("delete-todo"))})]),t("div",null,[t("div",ao,[t("div",ro,[t("h3",null,V(o.todo.title),1)])]),t("div",lo,[t("p",co,V(o.todo.description),1)])]),l(t("div",{class:"todo__item__header__actions",onClick:e[1]||(e[1]=f=>o.$emit("show-options"))},[s(r,{icon:"mdi:dots-vertical"})],512),[[p,o.isSelected]])])]),_:1},8,["class"])}const _o=B(so,[["render",po],["__scopeId","data-v-0c431cd3"]]),uo=S({name:"AppEmptyState",props:{message:{type:String,default:"There is error in your network connection. Please check your connection and try again."}},components:{BaseButton:z,Icon:k},methods:{refreshPage(){window.location.reload()}}}),mo="/assets/network-error.3fc7fca8.svg";const ho=o=>(O("data-v-a13ff038"),o=o(),D(),o),fo={class:"network__error"},go=ho(()=>t("img",{src:mo,alt:"empty state"},null,-1)),To=["innerHTML"];function yo(o,e,i,h,c,b){const r=n("Icon"),m=n("BaseButton");return _(),$("div",fo,[go,t("div",null,[t("p",{innerHTML:o.message},null,8,To)]),s(m,{text:"refresh",class:"refresh__button",onClick:o.refreshPage},{default:u(()=>[s(r,{icon:"mdi:refresh"})]),_:1},8,["onClick"])])}const Ao=B(uo,[["render",yo],["__scopeId","data-v-a13ff038"]]),wo=S({name:"TodoView",components:{BaseButton:z,Icon:k,AppModal:oo,BaseTextInput:Z,AppEmptyState:eo,AppTodoItem:_o,AppNetworkError:Ao,Spinner:G},data:()=>({showTodoModal:!1,todo:{title:"",description:"",date:"",priority:""}}),mounted(){console.log("mounted")},created(){this.makeTodoRequest(),console.log("created hook")},methods:{...Q(F,{makeTodoRequest:"fetchAllTodo",createTodo:"createTodo",deleteTodo:"deleteTodo"}),async makeCreateTodo(){this.createTodo({...this.todo}),this.showTodoModal=!1}},computed:{...E(F,["todoArray","isLoading","isFetchingTodoArray","errorFetchingTodo"]),...E(I,{bearerToken:"authorizationToken"}),disabledState(){return this.isLoading===!0}}});const a=o=>(O("data-v-83c474f5"),o=o(),D(),o),vo={class:"fetching__todo"},$o=a(()=>t("p",null,"fetching todo",-1)),Io={class:"header"},So={class:"select__form__field"},ko=a(()=>t("label",{for:"priority"},"Priority",-1)),Bo=a(()=>t("option",{disabled:"",value:""},"Please select priority",-1)),bo=a(()=>t("option",null,"urgent",-1)),Lo=a(()=>t("option",null,"not urgent",-1)),Co=a(()=>t("option",null,"delete",-1)),Mo=a(()=>t("option",null,"delicate",-1)),Vo=a(()=>t("option",null,"normal",-1)),Eo=[Bo,bo,Lo,Co,Mo,Vo];function No(o,e,i,h,c,b){var C;const r=n("Spinner"),m=n("AppNetworkError"),f=n("AppEmptyState"),R=n("AppTodoItem"),j=n("IconPlus"),g=n("BaseButton"),L=n("Icon"),T=n("BaseTextInput"),U=n("AppModal");return _(),$(N,null,[l(t("div",vo,[s(r),$o],512),[[p,o.isFetchingTodoArray]]),l(s(m,null,null,512),[[p,o.todoArray==null]]),((C=o.todoArray)==null?void 0:C.length)==0?(_(),v(f,{key:0})):W("",!0),(_(!0),$(N,null,X(o.todoArray,({title:d,description:q,id:M,priority:H})=>(_(),v(R,{todo:{title:d,description:q,id:M,priority:H},onDeleteTodo:Fo=>o.deleteTodo(M)},null,8,["todo","onDeleteTodo"]))),256)),t("div",Io,[s(g,{text:"add new",class:"add-new-button",onClick:e[0]||(e[0]=d=>o.showTodoModal=!0)},{default:u(()=>[s(j)]),_:1})]),s(g,{text:"",class:"add-new-fab",onClick:e[1]||(e[1]=d=>o.showTodoModal=!0)},{default:u(()=>[s(L,{icon:"mdi:plus"})]),_:1}),l(s(U,{onCloseModal:e[6]||(e[6]=d=>o.showTodoModal=!1),title:"Add New Todo"},{content:u(()=>[t("form",{action:"",onSubmit:e[5]||(e[5]=x((...d)=>o.makeCreateTodo&&o.makeCreateTodo(...d),["prevent"]))},[s(T,{label:"heading",type:"text",placeholder:"heading",modelValue:o.todo.title,"onUpdate:modelValue":e[2]||(e[2]=d=>o.todo.title=d),class:"field"},null,8,["modelValue"]),s(T,{placeholder:"description",label:"description",modelValue:o.todo.description,"onUpdate:modelValue":e[3]||(e[3]=d=>o.todo.description=d),class:"field"},null,8,["modelValue"]),s(T,{placeholder:"github url",label:"due date",type:"date",model:o.todo.date,class:"field"},null,8,["model"]),t("div",So,[ko,l(t("select",{"onUpdate:modelValue":e[4]||(e[4]=d=>o.todo.priority=d)},Eo,512),[[Y,o.todo.priority]]),s(L,{icon:"mdi:menu-down",class:"select__arrow__down"})]),s(g,{text:"",type:"submit",disabled:o.disabledState,class:P([o.disabledState==!0?"disabled__button":""])},{default:u(()=>[l(t("span",null,"Add Todo",512),[[p,!o.isLoading]]),l(s(r,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[p,o.isLoading]])]),_:1},8,["disabled","class"])],32)]),_:1},512),[[p,o.showTodoModal]])],64)}const Oo=B(wo,[["render",No],["__scopeId","data-v-83c474f5"]]);export{Oo as default};
