import{y as A,z as D,g as m,I as k,A as R,_ as B,r as d,o as l,c as T,w as c,b as t,e as s,t as v,d as q,B as J,f as P,S as U,C as j,D as I,a as S,j as i,v as r,l as H,F as $,E as K,n as G,h as Q,p as W,i as X}from"./index.d23d99c8.js";import{A as Y,a as Z}from"./AppEmptyState.2ea4adb8.js";import{A as x}from"./AppNetworkError.47d0263a.js";const oo=A(),f=oo.getAuthToken,b=D("todoStore",{state:()=>({todoArray:null,noOfRows:10,pageIndex:1,isLoading:!1,isFetchingTodoArray:!1,errorFetchingTodo:!1,errorMessage:""}),getters:{getAllTodo:o=>o.todoArray},actions:{async fetchAllTodo(){this.isFetchingTodoArray=!0;try{const{data:o}=await m.get("/todo",{headers:{Authorization:`Bearer ${f}`}});this.todoArray=o.data.todo,this.noOfRows=o.data.noOfRows,this.pageIndex=o.DataTransfer.CurrentPage,this.isFetchingTodoArray=!1,console.log(JSON.stringify(o))}catch{this.isFetchingTodoArray=!1}},async createTodo(o){A(),this.isLoading=!0;try{const{data:e}=await m.post("/todo",{...o},{headers:{Authorization:`Bearer ${f}`}});e.success&&(this.fetchAllTodo(),this.isLoading=!1,o.title="",o.description=""),console.log(JSON.stringify(e))}catch{this.errorFetchingTodo=!0,this.isLoading=!1}this.isLoading=!1},async deleteTodo(o){try{const{data:e}=await m.delete(`/todo/${o}`,{headers:{Authorization:`Bearer ${f}`}});e.success&&this.fetchAllTodo(),console.log("the todo id is ",o),console.log(JSON.stringify(e))}catch{}}}}),eo={name:"AppTodoItem",components:{Icon:k,AppListItem:R},props:{todo:{type:Object,required:!0,default:()=>({title:"Todo title",description:"Todo description"})}}};const to={class:"todo__item"},so={class:"todo__item__header__actions__delete"},ao={class:"todo__item__header"},no={class:"todo__item__header__title"},io={class:"todo__item__header__actions"},ro={class:"todo__item__header__actions__edit"},lo={class:"todo__item__content"};function co(o,e,p,L,M,V){const n=d("Icon"),_=d("AppListItem");return l(),T(_,null,{default:c(()=>[t("div",to,[t("div",so,[s(n,{icon:"mdi:close-circle-outline",onClick:e[0]||(e[0]=g=>o.$emit("delete-todo"))})]),t("div",null,[t("div",ao,[t("div",no,[t("h3",null,v(p.todo.title),1)]),t("div",io,[t("div",ro,[s(n,{icon:"mdi:clipboard-edit-outline"})])])]),t("div",lo,[t("p",null,v(p.todo.description),1)])])])]),_:1})}const po=B(eo,[["render",co],["__scopeId","data-v-3ad5b614"]]),_o=q({name:"TodoView",components:{BaseButton:J,Icon:k,AppModal:Y,BaseTextInput:P,AppEmptyState:Z,AppTodoItem:po,AppNetworkError:x,Spinner:U},data:()=>({showTodoModal:!1,todo:{title:"",description:"",date:""}}),mounted(){console.log("mounted")},created(){this.makeTodoRequest(),console.log("created hook")},methods:{...j(b,{makeTodoRequest:"fetchAllTodo",createTodo:"createTodo",deleteTodo:"deleteTodo"}),async makeCreateTodo(){this.createTodo({title:this.todo.title,description:this.todo.description}),this.showTodoModal=!1}},computed:{...I(b,["todoArray","isLoading","isFetchingTodoArray","errorFetchingTodo"]),...I(A,{bearerToken:"authorizationToken"}),disabledState(){return this.isLoading===!0}}});const C=o=>(W("data-v-4075522a"),o=o(),X(),o),uo=C(()=>t("h2",null,"Todo",-1)),ho={class:"fetching__todo"},mo=C(()=>t("p",null,"fetching todo",-1)),fo={class:"header"};function To(o,e,p,L,M,V){var y;const n=d("Spinner"),_=d("AppNetworkError"),g=d("AppEmptyState"),F=d("AppTodoItem"),N=d("IconPlus"),u=d("BaseButton"),E=d("Icon"),h=d("BaseTextInput"),O=d("AppModal");return l(),S($,null,[uo,i(t("div",ho,[s(n),mo],512),[[r,o.isFetchingTodoArray]]),i(s(_,null,null,512),[[r,o.todoArray==null]]),((y=o.todoArray)==null?void 0:y.length)==0?(l(),T(g,{key:0})):H("",!0),(l(!0),S($,null,K(o.todoArray,({title:a,description:z,id:w})=>(l(),T(F,{todo:{title:a,description:z,id:w},onDeleteTodo:Ao=>o.deleteTodo(w)},null,8,["todo","onDeleteTodo"]))),256)),t("div",fo,[s(u,{text:"add new",class:"add-new-button",onClick:e[0]||(e[0]=a=>o.showTodoModal=!0)},{default:c(()=>[s(N)]),_:1})]),s(u,{text:"",class:"add-new-fab",onClick:e[1]||(e[1]=a=>o.showTodoModal=!0)},{default:c(()=>[s(E,{icon:"mdi:plus"})]),_:1}),i(s(O,{onCloseModal:e[5]||(e[5]=a=>o.showTodoModal=!1),title:"Add New Todo"},{content:c(()=>[t("form",{action:"",onSubmit:e[4]||(e[4]=Q((...a)=>o.makeCreateTodo&&o.makeCreateTodo(...a),["prevent"]))},[s(h,{label:"heading",type:"text",placeholder:"heading",modelValue:o.todo.title,"onUpdate:modelValue":e[2]||(e[2]=a=>o.todo.title=a),class:"field"},null,8,["modelValue"]),s(h,{placeholder:"description",label:"description",modelValue:o.todo.description,"onUpdate:modelValue":e[3]||(e[3]=a=>o.todo.description=a),class:"field"},null,8,["modelValue"]),s(h,{placeholder:"github url",label:"due date",type:"date",model:o.todo.date,class:"field"},null,8,["model"]),s(u,{text:"",type:"submit",disabled:o.disabledState,class:G([o.disabledState==!0?"disabled__button":""])},{default:c(()=>[i(t("span",null,"Add Todo",512),[[r,!o.isLoading]]),i(s(n,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[r,o.isLoading]])]),_:1},8,["disabled","class"])],32)]),_:1},512),[[r,o.showTodoModal]])],64)}const vo=B(_o,[["render",To],["__scopeId","data-v-4075522a"]]);export{vo as default};
