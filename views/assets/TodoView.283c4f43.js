import{y as v,z as P,g as T,d as C,I as E,A as q,_ as M,r as d,o as p,c as y,w as u,b as t,e as s,t as $,j as i,v as l,B as J,f as U,S as j,C as H,D as k,a as b,l as K,F as B,E as G,n as Q,h as W,p as X,i as Y}from"./index.21e7ce34.js";import{A as Z,a as x}from"./AppEmptyState.101a16c6.js";import{A as oo}from"./AppNetworkError.d0f80a22.js";const eo=v(),g=eo.getAuthToken,L=P("todoStore",{state:()=>({todoArray:null,noOfRows:10,pageIndex:1,isLoading:!1,isFetchingTodoArray:!1,errorFetchingTodo:!1,errorMessage:""}),getters:{getAllTodo:o=>o.todoArray},actions:{async fetchAllTodo(){this.isFetchingTodoArray=!0;try{const{data:o}=await T.get("/todo",{headers:{Authorization:`Bearer ${g}`}});this.todoArray=o.data.todo,this.noOfRows=o.data.noOfRows,this.pageIndex=o.DataTransfer.CurrentPage,this.isFetchingTodoArray=!1,console.log(JSON.stringify(o))}catch{this.isFetchingTodoArray=!1}},async createTodo(o){v(),this.isLoading=!0;try{const{data:e}=await T.post("/todo",{...o},{headers:{Authorization:`Bearer ${g}`}});e.success&&(this.fetchAllTodo(),this.isLoading=!1,o.title="",o.description=""),console.log(JSON.stringify(e))}catch{this.errorFetchingTodo=!0,this.isLoading=!1}this.isLoading=!1},async deleteTodo(o){try{const{data:e}=await T.delete(`/todo/${o}`,{headers:{Authorization:`Bearer ${g}`}});e.success&&this.fetchAllTodo(),console.log("the todo id is ",o),console.log(JSON.stringify(e))}catch{}}}});let A=!0;const to=C({name:"AppTodoItem",components:{Icon:E,AppListItem:q},data:()=>({}),props:{todo:{type:Object,required:!0,default:()=>({title:"Todo title",description:"Todo description"})}},computed:{isSelected(){return A}},mounted(){const o=document.getElementsByClassName("todo__item"),e=1300;for(const a of o)a.addEventListener("mousedown",function(_){setTimeout(r,e);function r(){A=!1,console.log("long press ",A),a.classList.add("is__selected")}}),a.addEventListener("mouseup",function(_){setTimeout(r,e);function r(){console.log("long press"),a.classList.add("is__selected")}})}});const so={class:"todo__item"},no={class:"todo__item__header__actions__delete"},ao={class:"todo__item__header trim__text"},io={class:"todo__item__header__title"},lo={class:"todo__item__content"},ro={class:"trim__text"},co={class:"todo__item__header__actions"};function po(o,e,a,_,r,V){const c=d("Icon"),m=d("AppListItem");return p(),y(m,null,{default:u(()=>[t("div",so,[t("div",no,[s(c,{icon:"mdi:close-circle-outline",onClick:e[0]||(e[0]=w=>o.$emit("delete-todo"))})]),t("div",null,[t("div",ao,[t("div",io,[t("h3",null,$(o.todo.title),1)])]),t("div",lo,[t("p",ro,$(o.todo.description),1)])]),i(t("div",co,[s(c,{icon:"mdi:dots-vertical"})],512),[[l,o.isSelected]])])]),_:1})}const uo=M(to,[["render",po],["__scopeId","data-v-8e41927a"]]),_o=C({name:"TodoView",components:{BaseButton:J,Icon:E,AppModal:Z,BaseTextInput:U,AppEmptyState:x,AppTodoItem:uo,AppNetworkError:oo,Spinner:j},data:()=>({showTodoModal:!1,todo:{title:"",description:"",date:""}}),mounted(){console.log("mounted")},created(){this.makeTodoRequest(),console.log("created hook")},methods:{...H(L,{makeTodoRequest:"fetchAllTodo",createTodo:"createTodo",deleteTodo:"deleteTodo"}),async makeCreateTodo(){this.createTodo({title:this.todo.title,description:this.todo.description}),this.showTodoModal=!1}},computed:{...k(L,["todoArray","isLoading","isFetchingTodoArray","errorFetchingTodo"]),...k(v,{bearerToken:"authorizationToken"}),disabledState(){return this.isLoading===!0}}});const N=o=>(X("data-v-4075522a"),o=o(),Y(),o),mo=N(()=>t("h2",null,"Todo",-1)),ho={class:"fetching__todo"},fo=N(()=>t("p",null,"fetching todo",-1)),To={class:"header"};function go(o,e,a,_,r,V){var S;const c=d("Spinner"),m=d("AppNetworkError"),w=d("AppEmptyState"),F=d("AppTodoItem"),O=d("IconPlus"),h=d("BaseButton"),z=d("Icon"),f=d("BaseTextInput"),D=d("AppModal");return p(),b(B,null,[mo,i(t("div",ho,[s(c),fo],512),[[l,o.isFetchingTodoArray]]),i(s(m,null,null,512),[[l,o.todoArray==null]]),((S=o.todoArray)==null?void 0:S.length)==0?(p(),y(w,{key:0})):K("",!0),(p(!0),b(B,null,G(o.todoArray,({title:n,description:R,id:I})=>(p(),y(F,{todo:{title:n,description:R,id:I},onDeleteTodo:Ao=>o.deleteTodo(I)},null,8,["todo","onDeleteTodo"]))),256)),t("div",To,[s(h,{text:"add new",class:"add-new-button",onClick:e[0]||(e[0]=n=>o.showTodoModal=!0)},{default:u(()=>[s(O)]),_:1})]),s(h,{text:"",class:"add-new-fab",onClick:e[1]||(e[1]=n=>o.showTodoModal=!0)},{default:u(()=>[s(z,{icon:"mdi:plus"})]),_:1}),i(s(D,{onCloseModal:e[5]||(e[5]=n=>o.showTodoModal=!1),title:"Add New Todo"},{content:u(()=>[t("form",{action:"",onSubmit:e[4]||(e[4]=W((...n)=>o.makeCreateTodo&&o.makeCreateTodo(...n),["prevent"]))},[s(f,{label:"heading",type:"text",placeholder:"heading",modelValue:o.todo.title,"onUpdate:modelValue":e[2]||(e[2]=n=>o.todo.title=n),class:"field"},null,8,["modelValue"]),s(f,{placeholder:"description",label:"description",modelValue:o.todo.description,"onUpdate:modelValue":e[3]||(e[3]=n=>o.todo.description=n),class:"field"},null,8,["modelValue"]),s(f,{placeholder:"github url",label:"due date",type:"date",model:o.todo.date,class:"field"},null,8,["model"]),s(h,{text:"",type:"submit",disabled:o.disabledState,class:Q([o.disabledState==!0?"disabled__button":""])},{default:u(()=>[i(t("span",null,"Add Todo",512),[[l,!o.isLoading]]),i(s(c,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[l,o.isLoading]])]),_:1},8,["disabled","class"])],32)]),_:1},512),[[l,o.showTodoModal]])],64)}const So=M(_o,[["render",go],["__scopeId","data-v-4075522a"]]);export{So as default};
