import{y as w,z as q,g as T,d as C,I as E,A as J,_ as M,r as d,o as p,c as y,w as u,n as N,b as t,e as s,t as $,j as i,v as r,B as U,f as j,S as H,C as K,D as k,a as b,l as G,F as B,E as Q,h as W,p as X,i as Y}from"./index.fae8ed38.js";import{A as Z,a as x}from"./AppEmptyState.8b091d07.js";import{A as ee}from"./AppNetworkError.63334dc1.js";const oe=w(),g=oe.getAuthToken,L=q("todoStore",{state:()=>({todoArray:null,noOfRows:10,pageIndex:1,isLoading:!1,isFetchingTodoArray:!1,errorFetchingTodo:!1,errorMessage:""}),getters:{getAllTodo:e=>e.todoArray},actions:{async fetchAllTodo(){this.isFetchingTodoArray=!0;try{const{data:e}=await T.get("/todo",{headers:{Authorization:`Bearer ${g}`}});this.todoArray=e.data.todo,this.noOfRows=e.data.noOfRows,this.pageIndex=e.DataTransfer.CurrentPage,this.isFetchingTodoArray=!1,console.log(JSON.stringify(e))}catch{this.isFetchingTodoArray=!1}},async createTodo(e){w(),this.isLoading=!0;try{const{data:o}=await T.post("/todo",{...e},{headers:{Authorization:`Bearer ${g}`}});o.success&&(this.fetchAllTodo(),this.isLoading=!1,e.title="",e.description=""),console.log(JSON.stringify(o))}catch{this.errorFetchingTodo=!0,this.isLoading=!1}this.isLoading=!1},async deleteTodo(e){try{const{data:o}=await T.delete(`/todo/${e}`,{headers:{Authorization:`Bearer ${g}`}});o.success&&this.fetchAllTodo(),console.log("the todo id is ",e),console.log(JSON.stringify(o))}catch{}}}});let A=!0;const te=C({name:"AppTodoItem",components:{Icon:E,AppListItem:J},data:()=>({}),props:{todo:{type:Object,required:!0,default:()=>({title:"Todo title",description:"Todo description"})}},computed:{isSelected(){return A},priority(){const e=this.todo.priority.toLowerCase().trim();return e==="urgent"?"todo__item--urgent":e==="delicate"?"todo__item--delicate":e==="not-urgent"?"todo__item--not__urgent":e==="delete"?"todo__item--delete":"todo__item--normal"}},mounted(){const e=document.getElementsByClassName("todo__item"),o=1300;for(const a of e)a.addEventListener("mousedown",function(_){setTimeout(l,o);function l(){A=!1,console.log("long press ",A),a.classList.add("is__selected")}}),a.addEventListener("mouseup",function(_){setTimeout(l,o);function l(){console.log("long press"),a.classList.add("is__selected")}})}});const se={class:"todo__item"},de={class:"todo__item__header__actions__delete"},ne={class:"todo__item__header trim__text"},ae={class:"todo__item__header__title"},ie={class:"todo__item__content"},re={class:"trim__text"},le={class:"todo__item__header__actions"};function ce(e,o,a,_,l,F){const c=d("Icon"),m=d("AppListItem");return p(),y(m,{class:N(e.priority)},{default:u(()=>[t("div",se,[t("div",de,[s(c,{icon:"mdi:close-circle-outline",onClick:o[0]||(o[0]=v=>e.$emit("delete-todo"))})]),t("div",null,[t("div",ne,[t("div",ae,[t("h3",null,$(e.todo.title),1)])]),t("div",ie,[t("p",re,$(e.todo.description),1)])]),i(t("div",le,[s(c,{icon:"mdi:dots-vertical"})],512),[[r,e.isSelected]])])]),_:1},8,["class"])}const pe=M(te,[["render",ce],["__scopeId","data-v-be308367"]]),ue=C({name:"TodoView",components:{BaseButton:U,Icon:E,AppModal:Z,BaseTextInput:j,AppEmptyState:x,AppTodoItem:pe,AppNetworkError:ee,Spinner:H},data:()=>({showTodoModal:!1,todo:{title:"",description:"",date:""}}),mounted(){console.log("mounted")},created(){this.makeTodoRequest(),console.log("created hook")},methods:{...K(L,{makeTodoRequest:"fetchAllTodo",createTodo:"createTodo",deleteTodo:"deleteTodo"}),async makeCreateTodo(){this.createTodo({title:this.todo.title,description:this.todo.description}),this.showTodoModal=!1}},computed:{...k(L,["todoArray","isLoading","isFetchingTodoArray","errorFetchingTodo"]),...k(w,{bearerToken:"authorizationToken"}),disabledState(){return this.isLoading===!0}}});const V=e=>(X("data-v-95933640"),e=e(),Y(),e),_e=V(()=>t("h2",null,"Todo",-1)),me={class:"fetching__todo"},he=V(()=>t("p",null,"fetching todo",-1)),fe={class:"header"};function Te(e,o,a,_,l,F){var S;const c=d("Spinner"),m=d("AppNetworkError"),v=d("AppEmptyState"),O=d("AppTodoItem"),z=d("IconPlus"),h=d("BaseButton"),D=d("Icon"),f=d("BaseTextInput"),R=d("AppModal");return p(),b(B,null,[_e,i(t("div",me,[s(c),he],512),[[r,e.isFetchingTodoArray]]),i(s(m,null,null,512),[[r,e.todoArray==null]]),((S=e.todoArray)==null?void 0:S.length)==0?(p(),y(v,{key:0})):G("",!0),(p(!0),b(B,null,Q(e.todoArray,({title:n,description:P,id:I})=>(p(),y(O,{todo:{title:n,description:P,id:I,priority:"urgent"},onDeleteTodo:ge=>e.deleteTodo(I)},null,8,["todo","onDeleteTodo"]))),256)),t("div",fe,[s(h,{text:"add new",class:"add-new-button",onClick:o[0]||(o[0]=n=>e.showTodoModal=!0)},{default:u(()=>[s(z)]),_:1})]),s(h,{text:"",class:"add-new-fab",onClick:o[1]||(o[1]=n=>e.showTodoModal=!0)},{default:u(()=>[s(D,{icon:"mdi:plus"})]),_:1}),i(s(R,{onCloseModal:o[5]||(o[5]=n=>e.showTodoModal=!1),title:"Add New Todo"},{content:u(()=>[t("form",{action:"",onSubmit:o[4]||(o[4]=W((...n)=>e.makeCreateTodo&&e.makeCreateTodo(...n),["prevent"]))},[s(f,{label:"heading",type:"text",placeholder:"heading",modelValue:e.todo.title,"onUpdate:modelValue":o[2]||(o[2]=n=>e.todo.title=n),class:"field"},null,8,["modelValue"]),s(f,{placeholder:"description",label:"description",modelValue:e.todo.description,"onUpdate:modelValue":o[3]||(o[3]=n=>e.todo.description=n),class:"field"},null,8,["modelValue"]),s(f,{placeholder:"github url",label:"due date",type:"date",model:e.todo.date,class:"field"},null,8,["model"]),s(h,{text:"",type:"submit",disabled:e.disabledState,class:N([e.disabledState==!0?"disabled__button":""])},{default:u(()=>[i(t("span",null,"Add Todo",512),[[r,!e.isLoading]]),i(s(c,{"animation-duration":1e3,size:30,color:"#ffffff"},null,512),[[r,e.isLoading]])]),_:1},8,["disabled","class"])],32)]),_:1},512),[[r,e.showTodoModal]])],64)}const ve=M(ue,[["render",Te],["__scopeId","data-v-95933640"]]);export{ve as default};
